<html>    <head>        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />        <link rel="stylesheet" href="../innorix.css">        <script src="../innorix.js"></script>        <script>            var control = new Object();            innorix.setLanguage('ko');            window.onload = function() {                // 파일전송 컨트롤 생성                control = innorix.create({                    el: '#fileControl', 		// 컨트롤 출력 HTML 객체 ID                    transferMode: 'both', 		// 업로드, 다운로드 혼합사용                    installUrl: '../install/install.html', // Agent 설치 페이지                    uploadUrl: './upload.jsp',  // 업로드 URL                   	resumeDownloadType : 'confirm' 	// 다운로드이어받기정책 (confirm:사용자확인)                });                // 업로드 완료 이벤트                control.on('uploadComplete', function (p) {                    alert("업로드가 완료 되었습니다.\n다운로드 가능하게 재구성 합니다.");                    var urlBase = location.href.substring(0, location.href.lastIndexOf("/") + 1);                    var fileArray = new Array();                    var f = p.files;                    for (var i = 0; i < f.length; i++ ) {                        var fileObj = new Object();                        fileObj.printFileName = f[i].clientFileName;                        fileObj.fileSize = f[i].fileSize;                        fileObj.downloadUrl = urlBase + "zipDownload.jsp?fileFullPath=" + f[i].serverFilePath; // 서버에 파일이 저장되어있는 경로                        fileObj.serverFilePath = f[i].serverFilePath;                        fileArray.push(fileObj);                    }                                       control.removeAllFiles(); // 리스트 컨트롤에서 파일을 삭제                    control.presetDownloadFiles(fileArray); // 다운로드 목록을 구성                    console.log("-- 파일목록 구성 완료 --");                });            };                     	// 전체압축 다운로드			function fnZipDownload() {					var urlBase = location.href.substring(0, location.href.lastIndexOf("/") + 1);				var filePaths="";								var fileInfo = control.getAllFiles(); // 모든 파일 정보 출력				for(var i=0;i<fileInfo.length;i++) {					filePaths += fileInfo[i].serverFilePath+","; // 서버에 저장된 파일 경로				}								var innoJquery = innorix._load("innoJquery");				innoJquery.ajax({				    type : "POST",				    dataType : 'json',				    data : {				    	"zipFileName" : (Math.random()+"").substring(2,7)+".zip", // 압축 파일명을 랜덤함수 이용하여 생성				    	"filePaths": filePaths // 파일들 경로				    },				    url : urlBase + "zipFiles.jsp", // 압축을 실행할 url				    success : function(data) {				    	window.location.href = "zipDownload.jsp?zipFileFullPath=" + encodeURI(data.zipFilePath); // 넘어온 zipFilePath인코딩 하여 파일 다운로드				    },				});				}         				// 선택압축 다운로드         	function fnSelectZipDownload() {				var urlBase = location.href.substring(0, location.href.lastIndexOf("/") + 1);				var filePaths="";								var fileInfo = control.getSelectedFiles(); // 선택 파일 정보를 출력				if(fileInfo.length<1){					alert('파일을 선택해주세요.');					return; // 선택한 파일이 없으면 return				}								for(var i=0;i<fileInfo.length;i++) {					filePaths += fileInfo[i].serverFilePath+","; // 서버에 저장된 파일 경로				}								var innoJquery = innorix._load("innoJquery");				innoJquery.ajax({				    type : "POST",				    dataType : 'json',				    data : {				    	"zipFileName" : (Math.random()+"").substring(2,7)+".zip", // 압축 파일명을 랜덤함수 이용하여 생성				    	"filePaths": filePaths // 파일들 경로				    },				    url : urlBase + "zipFiles.jsp", // 압축을 실행할 url				    success : function(data) {				    	window.location.href = "zipDownload.jsp?zipFileFullPath=" + encodeURI(data.zipFilePath); // 넘어온 zipFilePath인코딩 하여 파일 다운로드				    },				});							}        </script>    </head>    <body>        <a href="../gnIndex.html">&larr; 예제 목록</a><br /><br />		<p>압축(.zip)하여 파일 다운로드 - 업로드 후 다운로드 시 압축하여 다운로드 예제</p>		        <div id="fileControl"></div><br/>		<div id="hiddenControl" style="display:none;"></div><br/>		        <input type="button" value="파일추가" onclick="control.openFileDialog();"/>        <input type="button" value="업로드" onclick="control.upload()";"/>                <br/><br/>                <input type="button" value="선택파일 다운로드" onclick="control.downloadSelectedFiles();"/>        <input type="button" value="전체 다운로드" onclick="control.download();"/>        <input type="button" value="선택압축 다운로드" onclick="fnSelectZipDownload();"/>        <input type="button" value="전체압축 다운로드" onclick="fnZipDownload();"/>    </body></html>